<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="description" content=""><meta viewport="width=device-width, initial-scale=1"><meta name="author" content="Ian Keen"><meta og:site_name="Cross View Animations with matchedGeometryEffect"><meta og:title="Cross View Animations with matchedGeometryEffect"><meta og:description=""><meta og:url="https://iankeen.tech"><meta twitter:card="summary"><meta twitter:site="@IanKay"><meta twitter:creator="@IanKay"><meta twitter:title="Cross View Animations with matchedGeometryEffect"><meta twitter:description=""><title>devbits: random development bits by Ian Keen</title><link rel="stylesheet" href="/Resources/style.css"><link rel="stylesheet" href="/Resources/swift.css"><link rel="shortcut icon" href="/Resources/favicon.ico"></head><body><div id="page-header"><a href="/"><div id="logo" class="wiggle"><p>devbits</p></div></a><div id="links"><div id="me"><a href="/workwithme/index.html">work with me</a><a href="/about/index.html">about</a></div><div id="social"><a href="https://www.twitter.com/IanKay"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMGgtMTRjLTIuNzYxIDAtNSAyLjIzOS01IDV2MTRjMCAyLjc2MSAyLjIzOSA1IDUgNWgxNGMyLjc2MiAwIDUtMi4yMzkgNS01di0xNGMwLTIuNzYxLTIuMjM4LTUtNS01em0tLjEzOSA5LjIzN2MuMjA5IDQuNjE3LTMuMjM0IDkuNzY1LTkuMzMgOS43NjUtMS44NTQgMC0zLjU3OS0uNTQzLTUuMDMyLTEuNDc1IDEuNzQyLjIwNSAzLjQ4LS4yNzggNC44Ni0xLjM1OS0xLjQzNy0uMDI3LTIuNjQ5LS45NzYtMy4wNjYtMi4yOC41MTUuMDk4IDEuMDIxLjA2OSAxLjQ4Mi0uMDU2LTEuNTc5LS4zMTctMi42NjgtMS43MzktMi42MzMtMy4yNi40NDIuMjQ2Ljk0OS4zOTQgMS40ODYuNDExLTEuNDYxLS45NzctMS44NzUtMi45MDctMS4wMTYtNC4zODMgMS42MTkgMS45ODYgNC4wMzggMy4yOTMgNi43NjYgMy40My0uNDc5LTIuMDUzIDEuMDgtNC4wMyAzLjE5OS00LjAzLjk0MyAwIDEuNzk3LjM5OCAyLjM5NSAxLjAzNy43NDgtLjE0NyAxLjQ1MS0uNDIgMi4wODYtLjc5Ni0uMjQ2Ljc2Ny0uNzY2IDEuNDEtMS40NDMgMS44MTYuNjY0LS4wOCAxLjI5Ny0uMjU2IDEuODg1LS41MTctLjQzOS42NTYtLjk5NiAxLjIzNC0xLjYzOSAxLjY5N3oiLz48L3N2Zz4="></a><a href="https://www.github.com/IanKeen"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMGgtMTRjLTIuNzYxIDAtNSAyLjIzOS01IDV2MTRjMCAyLjc2MSAyLjIzOSA1IDUgNWgxNGMyLjc2MiAwIDUtMi4yMzkgNS01di0xNGMwLTIuNzYxLTIuMjM4LTUtNS01em0tNC40NjYgMTkuNTljLS40MDUuMDc4LS41MzQtLjE3MS0uNTM0LS4zODR2LTIuMTk1YzAtLjc0Ny0uMjYyLTEuMjMzLS41NS0xLjQ4MSAxLjc4Mi0uMTk4IDMuNjU0LS44NzUgMy42NTQtMy45NDcgMC0uODc0LS4zMTItMS41ODgtLjgyMy0yLjE0Ny4wODItLjIwMi4zNTYtMS4wMTYtLjA3OS0yLjExNyAwIDAtLjY3MS0uMjE1LTIuMTk4LjgyLS42NC0uMTgtMS4zMjQtLjI2Ny0yLjAwNC0uMjcxLS42OC4wMDMtMS4zNjQuMDkxLTIuMDAzLjI2OS0xLjUyOC0xLjAzNS0yLjItLjgyLTIuMi0uODItLjQzNCAxLjEwMi0uMTYgMS45MTUtLjA3NyAyLjExOC0uNTEyLjU2LS44MjQgMS4yNzMtLjgyNCAyLjE0NyAwIDMuMDY0IDEuODY3IDMuNzUxIDMuNjQ1IDMuOTU0LS4yMjkuMi0uNDM2LjU1Mi0uNTA4IDEuMDctLjQ1Ny4yMDQtMS42MTQuNTU3LTIuMzI4LS42NjYgMCAwLS40MjMtLjc2OC0xLjIyNy0uODI1IDAgMC0uNzgtLjAxLS4wNTUuNDg3IDAgMCAuNTI1LjI0Ni44ODkgMS4xNyAwIDAgLjQ2MyAxLjQyOCAyLjY4OC45NDR2MS40ODljMCAuMjExLS4xMjkuNDU5LS41MjguMzg1LTMuMTgtMS4wNTctNS40NzItNC4wNTYtNS40NzItNy41OSAwLTQuNDE5IDMuNTgyLTggOC04czggMy41ODEgOCA4YzAgMy41MzMtMi4yODkgNi41MzEtNS40NjYgNy41OXoiLz48L3N2Zz4="></a><a href="https://iankeen.tech/atom.xml"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMGgtMTRjLTIuNzYxIDAtNSAyLjIzOS01IDV2MTRjMCAyLjc2MSAyLjIzOSA1IDUgNWgxNGMyLjc2MiAwIDUtMi4yMzkgNS01di0xNGMwLTIuNzYxLTIuMjM4LTUtNS01em0tMTIuODMyIDIwYy0xLjE5NyAwLTIuMTY4LS45NjktMi4xNjgtMi4xNjVzLjk3MS0yLjE2NSAyLjE2OC0yLjE2NSAyLjE2Ny45NjkgMi4xNjcgMi4xNjUtLjk3IDIuMTY1LTIuMTY3IDIuMTY1em01LjE4IDBjLS4wNDEtNC4wMjktMy4zMTQtNy4yOTgtNy4zNDgtNy4zMzl2LTMuMjA3YzUuODE0LjA0MSAxMC41MTggNC43MzkgMTAuNTYxIDEwLjU0NmgtMy4yMTN6bTUuNDQxIDBjLS4wMjEtNy4wNjMtNS43MzYtMTIuNzYxLTEyLjc4OS0xMi43OTJ2LTMuMjA4YzguODMuMDMxIDE1Ljk4IDcuMTc5IDE2IDE2aC0zLjIxMXoiLz48L3N2Zz4="></a></div></div></div><div id="page-title"><h1 class="title plain">Cross View Animations with matchedGeometryEffect</h1><h2 class="when">03 Jul 2020</h2><div id="tags"><div class="tag-container"><div class="tag"><a href="/tags/swiftui/index.html">SwiftUI</a></div></div></div><div class="divider"></div></div><div id="page-content"><p>WWDC this year gave us a ton of new things to play with, SwiftUI being front and center.A number of new <code>@propertyWrapper</code>s were introduced, one I found particularly interesting was <code>@Namespace</code>.</p><p>This property wrapper can be used in conjunction with an identifier and the view modifier named <code>matchedGeometryEffect</code> to coordinate the animation of a part of the screen when updates occur.This was in <a href="https://developer.apple.com/videos/play/wwdc2020/10041/">Whats new in SwiftUI</a> around the 19minute mark.</p><p>Unfortunately the example was super brief and only showed moving an element from within the same view body.</p><p>Let's quickly recap with an example, firstly <em>without</em> <code>@Namespace</code> and <code>matchedGeometryEffect</code>:</p><pre><code class="language-swift"><span class="keyword">struct</span><span class="none"> </span><span class="identifier">MyView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">State</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">left</span><span class="none"> = </span><span class="keyword">true</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">VStack</span><span class="none"> {
            </span><span class="identifier">Button</span><span class="none">(</span><span class="literal">&quot;Toggle&quot;</span><span class="none">, </span><span class="identifier">action</span><span class="none">: { </span><span class="identifier">withAnimation</span><span class="none"> { </span><span class="identifier">left</span><span class="none">.</span><span class="identifier">toggle</span><span class="none">() } })
            </span><span class="identifier">HStack</span><span class="none"> {
                </span><span class="keyword">if</span><span class="none"> </span><span class="identifier">left</span><span class="none"> {
                    </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">red</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                    </span><span class="identifier">Spacer</span><span class="none">()

                } </span><span class="keyword">else</span><span class="none"> {
                    </span><span class="identifier">Spacer</span><span class="none">()
                    </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">blue</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                }
            }
            .</span><span class="identifier">padding</span><span class="none">()
        }
    }
}
</span></code></pre><p>The result looks like this:</p><p><img title="" src="/Resources/cross_view_animations_with_matchedgeometryeffect/001.gif"></p><p>As you can see using <code>withAnimation</code> around the state change gives us a nice fade by default.Now let's see what happens when we add <code>@Namespace</code> and <code>matchedGeometryEffect</code>:</p><pre><code class="language-swift"><span class="keyword">struct</span><span class="none"> </span><span class="identifier">MyView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">State</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">left</span><span class="none"> = </span><span class="keyword">true</span><span class="none">
    </span><span class="keyword">@</span><span class="type">Namespace</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none"> </span><span class="comment">// 1) Add namespace</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">VStack</span><span class="none"> {
            </span><span class="identifier">Button</span><span class="none">(</span><span class="literal">&quot;Toggle&quot;</span><span class="none">, </span><span class="identifier">action</span><span class="none">: { </span><span class="identifier">withAnimation</span><span class="none"> { </span><span class="identifier">left</span><span class="none">.</span><span class="identifier">toggle</span><span class="none">() } })
            </span><span class="identifier">HStack</span><span class="none"> {
                </span><span class="keyword">if</span><span class="none"> </span><span class="identifier">left</span><span class="none"> {
                    </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">red</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                        .</span><span class="identifier">matchedGeometryEffect</span><span class="none">(</span><span class="identifier">id</span><span class="none">: </span><span class="literal">&quot;box&quot;</span><span class="none">, </span><span class="identifier">in</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">) </span><span class="comment">// 2) Add `matchedGeometryEffect` inside namespace</span><span class="none">
                    </span><span class="identifier">Spacer</span><span class="none">()

                } </span><span class="keyword">else</span><span class="none"> {
                    </span><span class="identifier">Spacer</span><span class="none">()
                    </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">blue</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                        .</span><span class="identifier">matchedGeometryEffect</span><span class="none">(</span><span class="identifier">id</span><span class="none">: </span><span class="literal">&quot;box&quot;</span><span class="none">, </span><span class="identifier">in</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">) </span><span class="comment">// 3) Same here, making sure they use the same `id`</span><span class="none">
                }
            }
            .</span><span class="identifier">padding</span><span class="none">()
        }
    }
}
</span></code></pre><p>SwiftUI now animates between these 2 <em>different</em> boxes seamlessly as though you were simply moving the <em>same</em> box.</p><p><img title="" src="/Resources/cross_view_animations_with_matchedgeometryeffect/002.gif"></p><h2>Animating across Views</h2><p>One thing that was not shown was how to perform animations like this <em>across</em> different views. For example what happens if we refactor our example like this:</p><pre><code class="language-swift"><span class="keyword">struct</span><span class="none"> </span><span class="identifier">MyView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">State</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">left</span><span class="none"> = </span><span class="keyword">true</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">VStack</span><span class="none"> {
            </span><span class="identifier">Button</span><span class="none">(</span><span class="literal">&quot;Toggle&quot;</span><span class="none">, </span><span class="identifier">action</span><span class="none">: { </span><span class="identifier">withAnimation</span><span class="none"> { </span><span class="identifier">left</span><span class="none">.</span><span class="identifier">toggle</span><span class="none">() } })
            </span><span class="keyword">if</span><span class="none"> </span><span class="identifier">left</span><span class="none"> { </span><span class="identifier">LeftView</span><span class="none">() }
            </span><span class="keyword">else</span><span class="none"> { </span><span class="identifier">RightView</span><span class="none">() }
        }
    }
}

</span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">LeftView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">HStack</span><span class="none"> {
            </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">red</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
            </span><span class="identifier">Spacer</span><span class="none">()
        }
        .</span><span class="identifier">padding</span><span class="none">()
    }
}
</span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">RightView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">HStack</span><span class="none"> {
            </span><span class="identifier">Spacer</span><span class="none">()
            </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">blue</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
        }
        .</span><span class="identifier">padding</span><span class="none">()
    }
}
</span></code></pre><p>Turns out integrating <code>@Namespace</code> and <code>matchedGeometryEffect</code> it's not immediately obvious, my first instinct was to just pass the <code>@Namespace</code> along like so:</p><pre><code class="language-swift"><span class="keyword">struct</span><span class="none"> </span><span class="identifier">MyView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">State</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">left</span><span class="none"> = </span><span class="keyword">true</span><span class="none">
    </span><span class="keyword">@</span><span class="type">Namespace</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">VStack</span><span class="none"> {
            </span><span class="identifier">Button</span><span class="none">(</span><span class="literal">&quot;Toggle&quot;</span><span class="none">, </span><span class="identifier">action</span><span class="none">: { </span><span class="identifier">withAnimation</span><span class="none"> { </span><span class="identifier">left</span><span class="none">.</span><span class="identifier">toggle</span><span class="none">() } })
            </span><span class="keyword">if</span><span class="none"> </span><span class="identifier">left</span><span class="none"> { </span><span class="identifier">LeftView</span><span class="none">(</span><span class="identifier">namespace</span><span class="none">: </span><span class="identifier">_namespace</span><span class="none">) }
            </span><span class="keyword">else</span><span class="none"> { </span><span class="identifier">RightView</span><span class="none">(</span><span class="identifier">namespace</span><span class="none">: </span><span class="identifier">_namespace</span><span class="none">) }
        }
    }
}

</span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">LeftView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">Namespace</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">HStack</span><span class="none"> {
            </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">red</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                .</span><span class="identifier">matchedGeometryEffect</span><span class="none">(</span><span class="identifier">id</span><span class="none">: </span><span class="literal">&quot;box&quot;</span><span class="none">, </span><span class="identifier">in</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">)
            </span><span class="identifier">Spacer</span><span class="none">()
        }
        .</span><span class="identifier">padding</span><span class="none">()
    }
}
</span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">RightView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">Namespace</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">HStack</span><span class="none"> {
            </span><span class="identifier">Spacer</span><span class="none">()
            </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">blue</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                .</span><span class="identifier">matchedGeometryEffect</span><span class="none">(</span><span class="identifier">id</span><span class="none">: </span><span class="literal">&quot;box&quot;</span><span class="none">, </span><span class="identifier">in</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">)
        }
        .</span><span class="identifier">padding</span><span class="none">()
    }
}
</span></code></pre><p>However this just resulted in the default fade animation...</p><p><img title="" src="/Resources/cross_view_animations_with_matchedgeometryeffect/001.gif"></p><p>The reason is <code>@Namespace</code> only has a single <code>init()</code> and it's <code>wrappedValue</code> is read-only.So by using the <code>@Namespace</code> property wrapper we are actually creating different instances in the left/right views rather than using the one we pass in.</p><p>However for this to work we still need to pass in the namespace since <code>matchedGeometryEffect</code> needs one. If we look at the namespace parameter of <code>matchedGeometryEffect</code> it actually wants a <code>Namespace.ID</code> which happens to be the <code>wrappedValue</code> from <code>@Namespace</code>. This means we should be able to just pass the <code>Namespace.ID</code> instead, let's try:</p><pre><code class="language-swift"><span class="keyword">struct</span><span class="none"> </span><span class="identifier">MyView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">@</span><span class="type">State</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">left</span><span class="none"> = </span><span class="keyword">true</span><span class="none">
    </span><span class="keyword">@</span><span class="type">Namespace</span><span class="none"> </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">VStack</span><span class="none"> {
            </span><span class="identifier">Button</span><span class="none">(</span><span class="literal">&quot;Toggle&quot;</span><span class="none">, </span><span class="identifier">action</span><span class="none">: { </span><span class="identifier">withAnimation</span><span class="none"> { </span><span class="identifier">left</span><span class="none">.</span><span class="identifier">toggle</span><span class="none">() } })
            </span><span class="keyword">if</span><span class="none"> </span><span class="identifier">left</span><span class="none"> { </span><span class="identifier">LeftView</span><span class="none">(</span><span class="identifier">namespace</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">) }
            </span><span class="keyword">else</span><span class="none"> { </span><span class="identifier">RightView</span><span class="none">(</span><span class="identifier">namespace</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">) }
        }
    }
}

</span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">LeftView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none">: </span><span class="type">Namespace</span><span class="none">.</span><span class="type">ID</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">HStack</span><span class="none"> {
            </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">red</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                .</span><span class="identifier">matchedGeometryEffect</span><span class="none">(</span><span class="identifier">id</span><span class="none">: </span><span class="literal">&quot;box&quot;</span><span class="none">, </span><span class="identifier">in</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">)
            </span><span class="identifier">Spacer</span><span class="none">()
        }
        .</span><span class="identifier">padding</span><span class="none">()
    }
}
</span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">RightView</span><span class="none">: </span><span class="type">View</span><span class="none"> {
    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">namespace</span><span class="none">: </span><span class="type">Namespace</span><span class="none">.</span><span class="type">ID</span><span class="none">

    </span><span class="keyword">var</span><span class="none"> </span><span class="identifier">body</span><span class="none">: </span><span class="keyword">some</span><span class="none"> </span><span class="type">View</span><span class="none"> {
        </span><span class="identifier">HStack</span><span class="none"> {
            </span><span class="identifier">Spacer</span><span class="none">()
            </span><span class="identifier">Color</span><span class="none">.</span><span class="identifier">blue</span><span class="none">.</span><span class="identifier">frame</span><span class="none">(</span><span class="identifier">width</span><span class="none">: </span><span class="literal">100</span><span class="none">, </span><span class="identifier">height</span><span class="none">: </span><span class="literal">100</span><span class="none">)
                .</span><span class="identifier">matchedGeometryEffect</span><span class="none">(</span><span class="identifier">id</span><span class="none">: </span><span class="literal">&quot;box&quot;</span><span class="none">, </span><span class="identifier">in</span><span class="none">: </span><span class="identifier">namespace</span><span class="none">)
        }
        .</span><span class="identifier">padding</span><span class="none">()
    }
}
</span></code></pre><p><img title="" src="/Resources/cross_view_animations_with_matchedgeometryeffect/002.gif"></p><p>Success!</p><h2>Recap</h2><p>Using these features you can create some fantastic interactions with <em>very little code</em>. The same interactions with <code>UIKit</code> would involve <em>numerous</em> additional types and fairly complex code to create the same transitions.</p><p>Remember that to 'link' elements with  <code>matchedGeometryEffect</code> you need to:</p><ul><li>Ensure they are in the same <code>Namespace</code> by using the same instance.</li><li>Ensure they have the same <code>id</code>.</li></ul><p>And SwiftUI will take care of the rest!</p></div><div id="page-footer"><div class="divider"></div><p>(c) Ian Keen</p></div></body></html>