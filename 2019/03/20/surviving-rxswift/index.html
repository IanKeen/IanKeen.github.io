<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="description" content=""><meta viewport="width=device-width, initial-scale=1"><meta name="author" content="Ian Keen"><meta og:site_name="Surviving RxSwift"><meta og:title="Surviving RxSwift"><meta og:description=""><meta og:url="https://iankeen.tech"><meta twitter:card="summary"><meta twitter:site="@IanKay"><meta twitter:creator="@IanKay"><meta twitter:title="Surviving RxSwift"><meta twitter:description=""><title>devbits: random development bits by Ian Keen</title><link rel="stylesheet" href="/Resources/style.css"><link rel="stylesheet" href="/Resources/swift.css"><link rel="shortcut icon" href="/Resources/favicon.ico"></head><body><div id="page-header"><a href="/"><div id="logo" class="wiggle"><p>devbits</p></div></a><div id="links"><div id="me"><a href="/workwithme/index.html">work with me</a><a href="/about/index.html">about</a></div><div id="social"><a href="https://www.twitter.com/IanKay"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMGgtMTRjLTIuNzYxIDAtNSAyLjIzOS01IDV2MTRjMCAyLjc2MSAyLjIzOSA1IDUgNWgxNGMyLjc2MiAwIDUtMi4yMzkgNS01di0xNGMwLTIuNzYxLTIuMjM4LTUtNS01em0tLjEzOSA5LjIzN2MuMjA5IDQuNjE3LTMuMjM0IDkuNzY1LTkuMzMgOS43NjUtMS44NTQgMC0zLjU3OS0uNTQzLTUuMDMyLTEuNDc1IDEuNzQyLjIwNSAzLjQ4LS4yNzggNC44Ni0xLjM1OS0xLjQzNy0uMDI3LTIuNjQ5LS45NzYtMy4wNjYtMi4yOC41MTUuMDk4IDEuMDIxLjA2OSAxLjQ4Mi0uMDU2LTEuNTc5LS4zMTctMi42NjgtMS43MzktMi42MzMtMy4yNi40NDIuMjQ2Ljk0OS4zOTQgMS40ODYuNDExLTEuNDYxLS45NzctMS44NzUtMi45MDctMS4wMTYtNC4zODMgMS42MTkgMS45ODYgNC4wMzggMy4yOTMgNi43NjYgMy40My0uNDc5LTIuMDUzIDEuMDgtNC4wMyAzLjE5OS00LjAzLjk0MyAwIDEuNzk3LjM5OCAyLjM5NSAxLjAzNy43NDgtLjE0NyAxLjQ1MS0uNDIgMi4wODYtLjc5Ni0uMjQ2Ljc2Ny0uNzY2IDEuNDEtMS40NDMgMS44MTYuNjY0LS4wOCAxLjI5Ny0uMjU2IDEuODg1LS41MTctLjQzOS42NTYtLjk5NiAxLjIzNC0xLjYzOSAxLjY5N3oiLz48L3N2Zz4="></a><a href="https://www.github.com/IanKeen"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMGgtMTRjLTIuNzYxIDAtNSAyLjIzOS01IDV2MTRjMCAyLjc2MSAyLjIzOSA1IDUgNWgxNGMyLjc2MiAwIDUtMi4yMzkgNS01di0xNGMwLTIuNzYxLTIuMjM4LTUtNS01em0tNC40NjYgMTkuNTljLS40MDUuMDc4LS41MzQtLjE3MS0uNTM0LS4zODR2LTIuMTk1YzAtLjc0Ny0uMjYyLTEuMjMzLS41NS0xLjQ4MSAxLjc4Mi0uMTk4IDMuNjU0LS44NzUgMy42NTQtMy45NDcgMC0uODc0LS4zMTItMS41ODgtLjgyMy0yLjE0Ny4wODItLjIwMi4zNTYtMS4wMTYtLjA3OS0yLjExNyAwIDAtLjY3MS0uMjE1LTIuMTk4LjgyLS42NC0uMTgtMS4zMjQtLjI2Ny0yLjAwNC0uMjcxLS42OC4wMDMtMS4zNjQuMDkxLTIuMDAzLjI2OS0xLjUyOC0xLjAzNS0yLjItLjgyLTIuMi0uODItLjQzNCAxLjEwMi0uMTYgMS45MTUtLjA3NyAyLjExOC0uNTEyLjU2LS44MjQgMS4yNzMtLjgyNCAyLjE0NyAwIDMuMDY0IDEuODY3IDMuNzUxIDMuNjQ1IDMuOTU0LS4yMjkuMi0uNDM2LjU1Mi0uNTA4IDEuMDctLjQ1Ny4yMDQtMS42MTQuNTU3LTIuMzI4LS42NjYgMCAwLS40MjMtLjc2OC0xLjIyNy0uODI1IDAgMC0uNzgtLjAxLS4wNTUuNDg3IDAgMCAuNTI1LjI0Ni44ODkgMS4xNyAwIDAgLjQ2MyAxLjQyOCAyLjY4OC45NDR2MS40ODljMCAuMjExLS4xMjkuNDU5LS41MjguMzg1LTMuMTgtMS4wNTctNS40NzItNC4wNTYtNS40NzItNy41OSAwLTQuNDE5IDMuNTgyLTggOC04czggMy41ODEgOCA4YzAgMy41MzMtMi4yODkgNi41MzEtNS40NjYgNy41OXoiLz48L3N2Zz4="></a><a href="https://iankeen.tech/atom.xml"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNMTkgMGgtMTRjLTIuNzYxIDAtNSAyLjIzOS01IDV2MTRjMCAyLjc2MSAyLjIzOSA1IDUgNWgxNGMyLjc2MiAwIDUtMi4yMzkgNS01di0xNGMwLTIuNzYxLTIuMjM4LTUtNS01em0tMTIuODMyIDIwYy0xLjE5NyAwLTIuMTY4LS45NjktMi4xNjgtMi4xNjVzLjk3MS0yLjE2NSAyLjE2OC0yLjE2NSAyLjE2Ny45NjkgMi4xNjcgMi4xNjUtLjk3IDIuMTY1LTIuMTY3IDIuMTY1em01LjE4IDBjLS4wNDEtNC4wMjktMy4zMTQtNy4yOTgtNy4zNDgtNy4zMzl2LTMuMjA3YzUuODE0LjA0MSAxMC41MTggNC43MzkgMTAuNTYxIDEwLjU0NmgtMy4yMTN6bTUuNDQxIDBjLS4wMjEtNy4wNjMtNS43MzYtMTIuNzYxLTEyLjc4OS0xMi43OTJ2LTMuMjA4YzguODMuMDMxIDE1Ljk4IDcuMTc5IDE2IDE2aC0zLjIxMXoiLz48L3N2Zz4="></a></div></div></div><div id="page-title"><h1 class="title plain">Surviving RxSwift</h1><h2 class="when">20 Mar 2019</h2><div id="tags"><div class="tag-container"><div class="tag"><a href="/tags/reactiveprogramming/index.html">ReactiveProgramming</a></div><div class="tag"><a href="/tags/rxswift/index.html">RxSwift</a></div></div></div><div class="divider"></div></div><div id="page-content"><p>Before I get started I need to mention that what follows are a set of best practices that I <em>personally</em> use to get the most out of RxSwift while avoiding a lot of the pitfalls people fall into. These are by no means presented as a set of hard rules that will work for everyone, though I do encourage you to try them.</p><h2>Why use Rx?</h2><p>If so many people struggle with it why use it at all? A perfectly valid question.</p><p>In our profession, there are so many ways to solve a problem and Rx is no different. Rx has a steep learning curve and it often isn't clear if one way of solving something is better than another. Figuring the subtleties out will take time, but it is very rewarding when you do.</p><p>The reason I use Rx is that, in my opinion, its greatest strength lies in the ability to take inputs from many sources, tame the often complex logic needed to combine them and leave you with outputs that update whenever the inputs do.</p><p>What this means is that, if you are following principles like SRP, you often don't need Rx for the individual, lower level components, but its power becomes quite clear in higher level ones.</p><p>With that in mind, let's get started...</p><h2>Use it sparingly</h2><p>The most problematic Rx codebases I have worked on and heard people complain about are the ones that have made or tried to make <em>every single part</em> reactive. The more Rx you use the bigger and scarier your stack traces are. Stepping through a long reactive chain is <em>hard</em> and the <code>.debug()</code> operator only gets you so far.</p><p>As I alluded to earlier, my solution to this is <em>only</em> using Rx in the higher level components such as view models and view controllers.</p><p>But... how do we make all these non-Rx things work in Rx?</p><h2>Wrap components in Rx</h2><p>We can build components, such as an API layer, using more widely understood paradigms like closures to deliver things asynchronously. For example:</p><pre><code class="language-swift"><span class="keyword">class</span><span class="none"> </span><span class="identifier">APIClient</span><span class="none"> {
    </span><span class="keyword">func</span><span class="none"> </span><span class="identifier">perform</span><span class="none">&lt;</span><span class="identifier">T</span><span class="none">: </span><span class="type">APIOperation</span><span class="none">&gt;(</span><span class="keyword">_</span><span class="none"> </span><span class="identifier">operation</span><span class="none">: </span><span class="type">T</span><span class="none">, </span><span class="identifier">complete</span><span class="none">: </span><span class="keyword">@escaping</span><span class="none"> (</span><span class="type">Result</span><span class="none">&lt;</span><span class="type">T</span><span class="none">.</span><span class="type">Response</span><span class="none">&gt;) -&gt; </span><span class="type">Void</span><span class="none">) -&gt; </span><span class="type">Cancellable</span><span class="none"> {
        </span><span class="comment">//use URLSession to perform request and attempt conversion of data to T.Response</span><span class="none">
    }
}
</span></code></pre><p>To make this work nicely with Rx we only need a few lines of code:</p><pre><code class="language-swift"><span class="keyword">extension</span><span class="none"> </span><span class="type">APIClient</span><span class="none">: </span><span class="type">ReactiveCompatible</span><span class="none"> { }

</span><span class="keyword">extension</span><span class="none"> </span><span class="type">Reactive</span><span class="none"> </span><span class="keyword">where</span><span class="none"> </span><span class="type">Base</span><span class="none"> == </span><span class="type">APIClient</span><span class="none"> {
    </span><span class="keyword">func</span><span class="none"> </span><span class="identifier">perform</span><span class="none">&lt;</span><span class="identifier">T</span><span class="none">: </span><span class="type">APIOperation</span><span class="none">&gt;(</span><span class="keyword">_</span><span class="none"> </span><span class="identifier">operation</span><span class="none">: </span><span class="type">T</span><span class="none">) -&gt; </span><span class="type">Observable</span><span class="none">&lt;</span><span class="type">T</span><span class="none">.</span><span class="type">Response</span><span class="none">&gt; {
        </span><span class="keyword">return</span><span class="none"> .</span><span class="identifier">create</span><span class="none"> { </span><span class="identifier">observer</span><span class="none"> </span><span class="keyword">in</span><span class="none">
            </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">task</span><span class="none"> = </span><span class="keyword">self</span><span class="none">.</span><span class="identifier">base</span><span class="none">.</span><span class="identifier">perform</span><span class="none">(</span><span class="identifier">operation</span><span class="none">) { </span><span class="identifier">result</span><span class="none"> </span><span class="keyword">in</span><span class="none">
                </span><span class="keyword">switch</span><span class="none"> </span><span class="identifier">result</span><span class="none"> {
                </span><span class="keyword">case</span><span class="none"> .</span><span class="identifier">success</span><span class="none">(</span><span class="keyword">let</span><span class="none"> </span><span class="identifier">value</span><span class="none">):
                    </span><span class="identifier">observer</span><span class="none">.</span><span class="identifier">onNext</span><span class="none">(</span><span class="identifier">value</span><span class="none">)
                    </span><span class="identifier">observer</span><span class="none">.</span><span class="identifier">onCompleted</span><span class="none">()
                </span><span class="keyword">case</span><span class="none"> .</span><span class="identifier">failure</span><span class="none">(</span><span class="keyword">let</span><span class="none"> </span><span class="identifier">error</span><span class="none">):
                    </span><span class="identifier">observer</span><span class="none">.</span><span class="identifier">onError</span><span class="none">(</span><span class="identifier">error</span><span class="none">)
                }
            }
            </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">Disposables</span><span class="none">.</span><span class="identifier">create</span><span class="none">(</span><span class="identifier">with</span><span class="none">: </span><span class="identifier">task</span><span class="none">.</span><span class="identifier">cancel</span><span class="none">)
        }
    }
}
</span></code></pre><p>With this, our <code>APIClient</code> can now easily be used in Rx chains. So what is the benefit of doing it this way?</p><p>Debugging is now much easier, we can set breakpoints within our non-Rx code and step through without all the additional noise Rx adds to our stack traces. We can now also write tests using the standard XCTest frameworks. Finally, we have a much more portable component. There's nothing stopping us from using this same API layer in other apps that may not use Rx.</p><h2>You don't need most traits</h2><p>RxSwift provides a wide range of <a href="https://github.com/ReactiveX/RxSwift/blob/master/Documentation/Traits.md">traits</a>. Traits are wrappers around a standard <code>Observable</code> that provide additional semantics/behaviours. This might sound great, we want to leverage Swifts' type system after all right? It's quite common to see code using a <code>Single</code> rather than an <code>Observable</code>  for the API layer example above.</p><p>The problem with these different traits is that they do not always compose well together. There are a number of custom extensions floating around to help translate between them. You can avoid jumping through all these hoops by simply sticking with a standard <code>Observable</code>. There's no downside to avoiding traits.</p><p>Keen-eyed readers will have spotted the "(most)" in the heading. There is an exception to this one! You 100% should be using RxCocoa traits like <code>Driver</code> when you expose values for your view to consume as well as <code>ControlEvent</code> or <code>ControlProperty</code> which you encounter when using properties like <code>UIButton.rx.tap</code>. This is because those traits are designed specifically to interact with your UI. They will ensure values are shared and that everything happens on the main thread.</p><h2>Avoid subjects</h2><p>There are a number of shifts you need to make in how you think about data when learning Rx. One of the biggest is learning to construct streams such that the values coming <em>out</em> of them are the result of combining and/or transforming the values being sent <em>in</em>. A simplistic way to think about streams is like a mapping function <code>(A) -> B</code>, or <code>(A, B) -> C</code></p><p>Quite often when that shift has not yet been made you will see code that falls back on subjects to bridge the gap. Subjects are objects in Rx that are both input <em>and</em> output. They can be subscribed to but also incoming values to be sent to them.</p><p>Let's look at one such example of a view model for performing a search:</p><pre><code class="language-swift"><span class="keyword">class</span><span class="none"> </span><span class="identifier">SearchViewModel</span><span class="none"> {
    </span><span class="comment">// MARK: - Input</span><span class="none">
    </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">searchText</span><span class="none"> = </span><span class="identifier">PublishSubject</span><span class="none">&lt;</span><span class="type">String</span><span class="none">&gt;()

    </span><span class="comment">// MARK: - Output</span><span class="none">
    </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">results</span><span class="none">: </span><span class="type">Driver</span><span class="none">&lt;[</span><span class="type">SearchResultViewModel</span><span class="none">]&gt;
    </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">resultCount</span><span class="none">: </span><span class="type">Driver</span><span class="none">&lt;</span><span class="type">String</span><span class="none">&gt;

    </span><span class="keyword">init</span><span class="none">(</span><span class="identifier">searchService</span><span class="none">: </span><span class="type">SearchService</span><span class="none">) {
        </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">searchResults</span><span class="none"> = </span><span class="identifier">searchText</span><span class="none">
            .</span><span class="identifier">throttle</span><span class="none">(</span><span class="literal">0.3</span><span class="none">, </span><span class="identifier">scheduler</span><span class="none">: </span><span class="identifier">MainScheduler</span><span class="none">.</span><span class="identifier">instance</span><span class="none">)
            .</span><span class="identifier">distinctUntilChanged</span><span class="none">()
            .</span><span class="identifier">flatMapLatest</span><span class="none"> { </span><span class="identifier">query</span><span class="none"> </span><span class="keyword">in</span><span class="none">
                </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">searchService</span><span class="none">.</span><span class="identifier">search</span><span class="none">(</span><span class="identifier">query</span><span class="none">: </span><span class="identifier">query</span><span class="none">).</span><span class="identifier">catchErrorJustReturn</span><span class="none">([])
            }
            .</span><span class="identifier">asDriver</span><span class="none">(</span><span class="identifier">onErrorJustReturn</span><span class="none">: [])
            .</span><span class="identifier">startWith</span><span class="none">([])

        </span><span class="identifier">results</span><span class="none"> = </span><span class="identifier">searchResults</span><span class="none">.</span><span class="identifier">map</span><span class="none"> { </span><span class="identifier">results</span><span class="none"> </span><span class="keyword">in</span><span class="none">
            </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">results</span><span class="none">.</span><span class="identifier">map</span><span class="none"> { </span><span class="identifier">result</span><span class="none"> </span><span class="keyword">in</span><span class="none">
                </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">SearchResultViewModel</span><span class="none">(</span><span class="identifier">searchResult</span><span class="none">: </span><span class="identifier">result</span><span class="none">)
            }
        }

        </span><span class="identifier">resultCount</span><span class="none"> = </span><span class="identifier">searchResults</span><span class="none">.</span><span class="identifier">map</span><span class="none"> { </span><span class="literal">&quot;</span><span class="none">\</span><span class="none">(</span><span class="identifier">$0</span><span class="none">.</span><span class="identifier">count</span><span class="none">)</span><span class="literal"> result(s)&quot;</span><span class="none"> }
    }
}
</span></code></pre><p>On its own, this looks really quite straight forward. <code>searchText</code> receives some text and we use that to do our search. From that, we can define 2 other streams, one for our list of results and one for a string showing the count.</p><p>However, because <code>searchText</code> is both input <em>and</em> output we have accidentally introduced an additional output to our view model. There is no way for us to prevent something else from subscribing to <code>searchText</code> and executing other code. If this is something you need to do then you should either</p><ul><li>Subscribe directly to the underlying input source (i.e. the text field); or</li><li>Create another explicit output for this behaviour</li></ul><p>By not creating a clear separation between input and output it becomes harder to debug where values may be coming from. It's also harder to reason about what the inputs and outputs for your system actually are.</p><p>Now let's see how we might refactor the same view model to remove the use of subjects:</p><pre><code class="language-swift"><span class="keyword">class</span><span class="none"> </span><span class="identifier">SearchViewModel</span><span class="none"> {
    </span><span class="keyword">struct</span><span class="none"> </span><span class="identifier">Input</span><span class="none"> {
        </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">searchText</span><span class="none">: </span><span class="type">Observable</span><span class="none">&lt;</span><span class="type">String</span><span class="none">&gt;
    }

    </span><span class="comment">// MARK: - Output</span><span class="none">
    </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">results</span><span class="none">: </span><span class="type">Driver</span><span class="none">&lt;[</span><span class="type">SearchResultViewModel</span><span class="none">]&gt;
    </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">resultCount</span><span class="none">: </span><span class="type">Driver</span><span class="none">&lt;</span><span class="type">String</span><span class="none">&gt;

    </span><span class="keyword">init</span><span class="none">(</span><span class="identifier">searchService</span><span class="none">: </span><span class="type">SearchService</span><span class="none">, </span><span class="identifier">inputs</span><span class="none">: </span><span class="type">Input</span><span class="none">) {
        </span><span class="keyword">let</span><span class="none"> </span><span class="identifier">searchResults</span><span class="none"> = </span><span class="identifier">inputs</span><span class="none">.</span><span class="identifier">searchText</span><span class="none">
            .</span><span class="identifier">throttle</span><span class="none">(</span><span class="literal">0.3</span><span class="none">, </span><span class="identifier">scheduler</span><span class="none">: </span><span class="identifier">MainScheduler</span><span class="none">.</span><span class="identifier">instance</span><span class="none">)
            .</span><span class="identifier">distinctUntilChanged</span><span class="none">()
            .</span><span class="identifier">flatMapLatest</span><span class="none"> { </span><span class="identifier">query</span><span class="none"> </span><span class="keyword">in</span><span class="none">
                </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">searchService</span><span class="none">.</span><span class="identifier">search</span><span class="none">(</span><span class="identifier">query</span><span class="none">: </span><span class="identifier">query</span><span class="none">).</span><span class="identifier">catchErrorJustReturn</span><span class="none">([])
            }
            .</span><span class="identifier">asDriver</span><span class="none">(</span><span class="identifier">onErrorJustReturn</span><span class="none">: [])
            .</span><span class="identifier">startWith</span><span class="none">([])

        </span><span class="identifier">results</span><span class="none"> = </span><span class="identifier">searchResults</span><span class="none">.</span><span class="identifier">map</span><span class="none"> { </span><span class="identifier">results</span><span class="none"> </span><span class="keyword">in</span><span class="none">
            </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">results</span><span class="none">.</span><span class="identifier">map</span><span class="none"> { </span><span class="identifier">result</span><span class="none"> </span><span class="keyword">in</span><span class="none">
                </span><span class="keyword">return</span><span class="none"> </span><span class="identifier">SearchResultViewModel</span><span class="none">(</span><span class="identifier">searchResult</span><span class="none">: </span><span class="identifier">result</span><span class="none">)
            }
        }

        </span><span class="identifier">resultCount</span><span class="none"> = </span><span class="identifier">searchResults</span><span class="none">.</span><span class="identifier">map</span><span class="none"> { </span><span class="literal">&quot;</span><span class="none">\</span><span class="none">(</span><span class="identifier">$0</span><span class="none">.</span><span class="identifier">count</span><span class="none">)</span><span class="literal"> result(s)&quot;</span><span class="none"> }
    }
}
</span></code></pre><p>The changes here are incredibly subtle, we have required that the input is passed via the constructor. This change gives me more fine-grained control over what my inputs and outputs are. I now have a single starting point to search for bugs relating to both text coming in and search results going out.</p><blockquote><p>It's worth noting that there are, of course, other ways you can go about removing/encapsulating the subjects.</p></blockquote><p>Again, there are exceptions to this one too but I'm not going to go into that hereâ€¦ If you absolutely feel that you need to use subjects, at the very least ensure you are encapsulating them so they are not publicly exposed for any random code to interact with. I would, however, encourage you to try and avoid them if you can!</p><h2>Limit DisposeBags to View Controllers</h2><p>Another issue you will see before the shift I mentioned has been made is <code>DisposeBag</code>s in places they don't belong. A <code>DisposeBag</code> is something that holds subscriptions. Subscriptions are what you get when you use functions like <code>subscribe</code>, <code>drive</code> or <code>bind</code>. These subscriptions are also where your apps side-effects are contained.</p><p>These subscriptions should be limited to your view controllers. Other components like view models should not contain subscriptions because they should not contain side-effects.</p><p>Interestingly enough, this problem is quite often seen when subjects are also being misused, as mentioned above. It is common to see subscriptions calling functions like <code>onNext</code> directly. This is a sign that your stream outputs are not being modelled as transformations of their inputs.</p><p>As with the others, there are rare exceptions to this one too. If, for some reason, a stream does not have an output you may need a single private subscription to ensure the stream is enabled. However, as with the other exceptions, do your best to avoid this situation.</p><h2>Summary</h2><p>So to quickly sum up the tips:</p><ul><li>Limit Rx to higher level components like view models and view controllers.</li><li>Build lower level components without Rx then add Rx wrapper extensions.</li><li>Limit yourself to <code>Observable</code> and <code>Driver</code>.</li><li>Write your Rx without subjects as much as possible.</li><li><code>DisposeBag</code>s really only belong in view controllers.</li></ul><p>I would strongly suggest anyone who is new to Rx or is feeling overwhelmed by it to simplify their use with these tips. As you get more comfortable with Rx you will start to get a good sense of when and how these tips apply as well as when they don't.</p></div><div id="page-footer"><div class="divider"></div><p>(c) Ian Keen</p></div></body></html>